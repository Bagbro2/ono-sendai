<div ng-controller="CardsCtrl">
  <nr-cards-view class="cards" card-filter="cardFilter" zoom="grid.zoom">
      <div ng-repeat="cardOrGroup in cards | sortCards:cardFilter track by cardOrGroup.id">
        <div ng-switch="cardOrGroup.isHeader">
          <!-- Group header -->
          <div ng-switch-when="true" ng-init="group = cardOrGroup">
            <h2 class="{{group.id}} grid-header" title="{{group.id}}">
              <small class="card-count"><ng-pluralize
                  count="group.cards.length"
                  when="{
                    '1': '1 card',
                    'other': '{} cards'
                  }"></ng-pluralize>
              </small>
              {{group.title|primaryGroupTitle:filter.groupings}}
              <small class="secondary-group">{{group.title|secondaryGroupTitle:filter.groupings}}</small>
            </h2>
          </div>

          <!-- Card -->
          <div ng-switch-default ng-init="card = cardOrGroup">
            <img class="grid-item"
                 ng-src="{{card.imagesrc}}"
                 ng-click="selectCard(card)"
                 ng-attr-title="{{card.title}}"
                 ng-show="isCardShown(card, cardFilter)">
          </div>
        </div>
      </div>
  </nr-cards-view>
</div>
