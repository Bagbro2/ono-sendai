<!--
NOTES:
* If deck building, in-faction-only option
-->

<form class="form form-horizontal" role="form" ng-controller="FilterCtrl">
  <div class="filter-group {{group.name}}" ng-repeat="group in filterUI" ng-class="{ active: isActiveGroup(group, filter.activeGroup) }" ng-show="isGroupShown(group, filter.side)">

    <h5 ng-click="activateGroup(group)">{{group.name}}</h5>

    <div class="filter-group-field {{field.name}} form-group" ng-repeat="field in group.fieldFilters" ng-show="isFieldShown(field, group, filter.activeGroup)">

      <label for="{{field.name}}-filter-operator" class="control-label">
        <i class="icon-{{field.icon}}"></i>
      </label>

      <div ng-switch="" on="field.type">
        <div ng-switch-when="side">
          <div class="btn-group">
            <button class="btn btn-default btn-sm" ng-model="filter.side" btn-radio="'Corp'">Corp</button>
            <button class="btn btn-default btn-sm" ng-model="filter.side" btn-radio="'Runner'">Runner</button>
          </div>
        </div>
        <div ng-switch-when="faction">
          <div class="btn-group">
            <button class="btn btn-default btn-sm" ng-repeat="faction in field.faction[filter.side.toLowerCase()]" ng-model="filter.fieldFilters.faction[faction.model]" btn-checkbox="">{{faction.abbr}}
            </button>
          </div>
        </div>
        <div ng-switch-when="numeric">
          <numeric-filter id="{{field.name}}-filter" filter-attr="filter.fieldFilters[field.name]" placeholder="{{field.placeholder}}">
          </numeric-filter>
        </div>
      </div>
    </div>
  </div>
</form>